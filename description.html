<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Budapest Metro Game – Description</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        .color-sample {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 0.25rem;
            vertical-align: middle;
        }

        .m1 {
            background: #FFD800;
        }

        .m2 {
            background: #E41F18;
        }

        .m3 {
            background: #005CA5;
        }

        .m4 {
            background: #4CA22F;
        }

        footer {
            text-align: center;
            font-size: 0.8rem;
            color: #666;
            padding: 1.5rem 0 1rem;
        }

        @media (max-width: 600px) {
            main {
                padding: 1rem;
            }
        }
    </style>
</head>

<body>
    <header>
        <h1>Budapest Metro Building Game – Game Description</h1>
    </header>

    <main>

        <!-- Overview section -->
        <section>
            <h2>Overview</h2>
            <p>
                This is a single-player metro-building game inspired by the Budapest metro network.
                You build four metro lines in four rounds:
            </p>
            <ul>
                <li><span class="color-sample m1"></span>M1 (yellow)</li>
                <li><span class="color-sample m2"></span>M2 (red)</li>
                <li><span class="color-sample m3"></span>M3 (blue)</li>
                <li><span class="color-sample m4"></span>M4 (green)</li>
            </ul>
            <p>
                The order of the lines is randomized. In each round you draw station cards and extend
                the current metro line to matching stations on a 10×10 grid map of Budapest.
            </p>
        </section>

        <!-- Basic Concepts -->
        <section>
            <h2>Basic Concepts</h2>
            <ul>
                <li><strong>Station</strong>: a position on the grid with a type A, B, C, D or Joker from
                    <code>stations.json</code>.
                </li>
                <li><strong>Station card</strong>: one of A, B, C, D, Joker, or Switch.</li>
                <li><strong>Segment</strong>: a straight line connecting two stations.</li>
                <li><strong>Metro line</strong>: all segments of the same color (M1–M4).</li>
                <li><strong>Turn</strong>: draw a station card and optionally build one segment.</li>
                <li><strong>Round</strong>: build all segments for one metro line.</li>
            </ul>
        </section>

        <!-- Symbols (ADDED) -->
        <section>
            <h2>Symbols</h2>
            <ul>
                <li>Each metro line’s <strong>starting station</strong> is outlined in its <strong>respective line
                        color</strong>.</li>
                <li>Black squares ( <strong>■</strong> ) represent <strong>railway stations</strong>.</li>
            </ul>
        </section>

        <!-- How a Turn Works -->
        <section>
            <h2>How a Turn Works</h2>
            <ol>
                <li>Press the <span class="kbd">Draw Card</span> button.</li>
                <li>The current card type (A/B/C/D/Joker/Switch) and platform type appear in the sidebar.</li>
                <li>Choose two stations (FROM → TO) to create a segment.</li>
                <li>Press <span class="kbd">Confirm &amp; draw next card</span> to place the segment.</li>
                <li>Or press <span class="kbd">Skip this turn</span> to do nothing.</li>
            </ol>
        </section>

        <!-- FROM / TO Selection -->
        <section>
            <h2>Station Selection (FROM / TO)</h2>

            <h3>Selection Order</h3>
            <ul>
                <li>You must always select in this order: <strong>FROM → TO</strong>.</li>
                <li>First click: select the <strong>FROM</strong> station.</li>
                <li>Second click: select the <strong>TO</strong> station.</li>
            </ul>

            <h3>Visual Feedback</h3>
            <ul>
                <li>The selected FROM station shows an <strong style="background:orange;">orange outline</strong>.</li>
                <li>The selected TO station shows a <strong style="background:lightskyblue;">light-blue
                        outline</strong>.</li>
            </ul>

            <h3>How to Cancel Selections</h3>
            <p>You may cancel selections only in this order: <strong>TO → FROM</strong>.</p>
            <ul>
                <li>Click the TO station again → clears TO.</li>
                <li>Then click the FROM station again → clears FROM.</li>
            </ul>
            <p><strong>You cannot clear FROM first while TO is selected.</strong></p>

            <div class="note">
                After both selections are cleared, you may choose new FROM → TO stations.
            </div>
        </section>

        <!-- Segment Rules -->
        <section>
            <h2>Segment Rules</h2>
            <ul>
                <li>Segments must be straight (horizontal, vertical, or 45° diagonal).</li>
                <li>The segment must connect exactly two stations.</li>
                <li>The first segment must start at the line’s colored starting station.</li>
                <li>Later segments must start from one of the line’s endpoints (unless using Switch).</li>
                <li>A segment cannot pass through another station.</li>
                <li>Segments cannot cross other lines except at stations.</li>
                <li>You cannot connect the same two stations twice (even across different lines).</li>
                <li>Station ID 30 is a universal Joker station.</li>
            </ul>
        </section>

        <!-- Cards -->
        <section>
            <h2>Cards</h2>
            <ul>
                <li><strong>A / B / C / D</strong>: Connect only to stations of that type.</li>
                <li><strong>Joker</strong>: Connect to any station.</li>
                <li><strong>Switch</strong>: Temporarily allows branching from non-endpoints.</li>
            </ul>
        </section>

        <!-- Scoring -->
        <section>
            <h2>Scoring (Simplified)</h2>
            <p>Each line (round) scores:</p>
            <ul>
                <li><strong>PK</strong>: number of districts the line enters.</li>
                <li><strong>PM</strong>: most stations in any single district.</li>
                <li><strong>PD</strong>: Danube crossings.</li>
                <li><strong>FP = PK × PM + PD</strong></li>
            </ul>

            <p>Railway station score track:</p>
            <p>0, 1, 2, 4, 6, 8, 11, 14, 17, 21, 25</p>

            <p>Final Score:</p>
            <p>
                Final Score = <br>
                Sum(FP1 + FP2 + FP3 + FP4)<br>
                + Railway points (PP)<br>
                + 2 × (#stations with 2 lines)<br>
                + 5 × (#stations with 3 lines)<br>
                + 9 × (#stations with 4 lines)
            </p>
        </section>
    </main>

    <footer>
        &copy; Budapest Metro Game – Description
    </footer>

</body>

</html>